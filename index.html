<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\markdown/index.md at 2020-11-23
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20201123" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ftp-fs &#x2013; Overview</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $(".source").addClass("prettyprint");
    prettyPrint();
  });
</script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>ftp-fs</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-11-23<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.2</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">ftp-fs</li>
    <li class="active"><a href="#"><span class="none"></span>Overview</a></li>
    <li><a href="download.html" title="Download"><span class="none"></span>Download</a></li>
    <li><a href="https://github.com/robtimus/ftp-fs/releases" class="externalLink" title="Releases"><span class="none"></span>Releases</a></li>
    <li><a href="apidocs/index.html" title="JavaDocs"><span class="none"></span>JavaDocs</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >

<h1>ftp-fs</h1>
<p>The <tt>ftp-fs</tt> library provides support for FTP and FTPS NIO.2 file systems, allowing FTP servers to be accessed in a similar way to local file systems.</p>
<div class="section">
<h2><a name="Creating_file_systems"></a>Creating file systems</h2>
<p>If the FTP file system library is available on the class path, it will register <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/spi/FileSystemProvider.html">FileSystemProviders</a> for schemes <tt>ftp</tt> and <tt>ftps</tt>. This allows you to create FTP and FTPS file systems using the <tt>newFileSystem</tt> methods of class <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystems.html">FileSystems</a>. You can use classes <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html">FTPEnvironment</a> and <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPSEnvironment.html">FTPSEnvironment</a> to help create the environment maps for those methods:</p>

<div>
<div>
<pre class="source">FTPEnvironment env = new FTPEnvironment()
        .withCredentials(username, password);
FileSystem fs = FileSystems.newFileSystem(URI.create(&quot;ftp://example.org&quot;), env);
</pre></div></div>

<p>Note that, for security reasons, it&#x2019;s not allowed to pass the credentials as part of the URI when creating a file system. It must be passed through the environment, as shown above.</p></div>
<div class="section">
<h2><a name="Creating_paths"></a>Creating paths</h2>
<p>After a file system has been created, <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html">Paths</a> can be created through the file system itself using its <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPath-java.lang.String-java.lang.String...-">getPath</a> method. As long as the file system is not closed, it&#x2019;s also possible to use <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html#get-java.net.URI-">Paths.get</a>. Note that if the file system was created with credentials, the username must be part of the URL. For instance:</p>

<div>
<div>
<pre class="source">// created without credentials
Path path1 = Paths.get(URI.create(&quot;ftp://example.org&quot;));
// created with credentials
Path path2 = Paths.get(URI.create(&quot;ftp://username@example.org&quot;));
</pre></div></div>

<p>If the username in the URI does not match the username used to create the file system, this will cause a <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystemNotFoundException.html">FileSystemNotFoundException</a> to be thrown.</p></div>
<div class="section">
<h2><a name="Attributes"></a>Attributes</h2>
<div class="section">
<h3><a name="File_attributes"></a>File attributes</h3>
<p>FTP file systems fully support read-access to the following attributes:</p>
<ul>

<li>Attributes defined in <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributeView.html">BasicFileAttributeView</a> and <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html">BasicFileAttributes</a>, available both with and without prefixes <tt>basic:</tt> or <tt>posix:</tt>.</li>
<li>Attributes defined in <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/FileOwnerAttributeView.html">FileOwnerAttributeView</a>, available with prefixes <tt>owner:</tt> or <tt>posix:</tt>.</li>
<li>Attributes defined in <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/PosixFileAttributeView.html">PosixFileAttributeView</a> and <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/PosixFileAttributes.html">PosixFileAttributes</a>, available with prefix <tt>posix:</tt>.</li>
</ul>
<p>Attempting to set any of these attributes, either through one of the file attribute views or through a file system, will result in an <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/lang/UnsupportedOperationException.html">UnsupportedOperationException</a>.</p></div>
<div class="section">
<h3><a name="File_store_attributes"></a>File store attributes</h3>
<p>When calling <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileStore.html#getAttribute-java.lang.String-">getAttribute</a> on a file store, the following attributes are supported:</p>
<ul>

<li><tt>totalSpace</tt>: returns the same value as the <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileStore.html#getTotalSpace--">getTotalSpace</a> method.</li>
<li><tt>usableSpace</tt>: returns the same value as the <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileStore.html#getUsableSpace--">getUsableSpace</a> method.</li>
<li><tt>unallocatedSpace</tt>: returns the same value as the <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileStore.html#getUnallocatedSpace--">getUnallocatedSpace</a> method.</li>
</ul>
<p>Because FTP servers do not return these values, these methods will all return <tt>Long.MAX_VALUE</tt>.</p>
<p>There is no support for <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/FileStoreAttributeView.html">FileStoreAttributeView</a>. Calling <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileStore.html#getFileStoreAttributeView-java.lang.Class-">getFileStoreAttributeView</a> on a file store will simply return <tt>null</tt>.</p></div></div>
<div class="section">
<h2><a name="FTPS_support"></a>FTPS support</h2>
<p>To create an FTPS connection instead of an FTP connection, use <tt>ftps</tt> as the scheme. Also, use class <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPSEnvironment.html">FTPSEnvironment</a> instead of class <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html">FTPEnvironment</a> to create the file system. Using an <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html">FTPEnvironment</a> instance is still allowed, but you will not be able to specify FTPS specific properties.</p></div>
<div class="section">
<h2><a name="Error_handling"></a>Error handling</h2>
<p>Unfortunately, FTP servers can use the same code for multiple erroneous situations. For example, code 550 can indicate that a file does not exist, or that access to an existing file is not allowed. Because of this, most methods do not throw the correct exception (<a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/NoSuchFileException.html">NoSuchFileException</a>, <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/AccessDeniedException.html">AccessDeniedException</a>, etc).</p>
<p>To allow this behaviour to be modified, class <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html">FTPEnvironment</a> has method <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html#withFileSystemExceptionFactory-com.github.robtimus.filesystems.ftp.FileSystemExceptionFactory-">withFileSystemExceptionFactory</a> that allows you to specify a custom <a href="apidocs/com/github/robtimus/filesystems/ftp/FileSystemExceptionFactory.html">FileSystemExceptionFactory</a> implementation which will be used to create exceptions based on the reply code and string of the command that triggered the error. By default, an instance of class <a href="apidocs/com/github/robtimus/filesystems/ftp/DefaultFileSystemExceptionFactory.html">DefaultFileSystemExceptionFactory</a> is used.</p>
<p>The <tt>ftp-fs</tt> library provides subclasses for <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystemException.html">FileSystemException</a> and several of its subclasses to allow the FTP server&#x2019;s reply code and string to be reserved. Instances of these classes can be returned by <a href="apidocs/com/github/robtimus/filesystems/ftp/FileSystemExceptionFactory.html">FileSystemExceptionFactory</a> implementations as needed.</p></div>
<div class="section">
<h2><a name="Thread_safety"></a>Thread safety</h2>
<p>The FTP protocol is fundamentally not thread safe. To overcome this limitation, FTP file systems maintain multiple connections to FTP servers. The number of connections determines the number of concurrent operations that can be executed. If all connections are busy, a new operation will block until a connection becomes available. Class <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html">FTPEnvironment</a> has method <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html#withClientConnectionCount-int-">withClientConnectionCount</a> that allows you to specify the number of connections to use. If no connection count is explicitly set, the default will be <tt>5</tt>. It also has method <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPEnvironment.html#withClientConnectionWaitTimeout-long-">withClientConnectionWaitTimeout</a> that can be used to control how long to wait before a connection is available. The default is <tt>0</tt> which means wait indefinitely.</p>
<p>When a stream or channel is opened for reading or writing, the connection will block because it will wait for the download or upload to finish. This will not occur until the stream or channel is closed. It is therefore advised to close streams and channels as soon as possible.</p></div>
<div class="section">
<h2><a name="Connection_management"></a>Connection management</h2>
<p>Because FTP file systems use multiple connections to an FTP server, it&#x2019;s possible that one or more of these connections become stale. Class <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPFileSystemProvider.html">FTPFileSystemProvider</a> has static method <a href="apidocs/com/github/robtimus/filesystems/ftp/FTPFileSystemProvider.html#keepAlive-java.nio.file.FileSystem-">keepAlive</a> that, if given an instance of an FTP file system, will send a keep-alive signal (NOOP) over each of its idle connections. You should ensure that this method is called on a regular interval.</p></div>
<div class="section">
<h2><a name="Limitations"></a>Limitations</h2>
<p>FTP file systems knows the following limitations:</p>
<ul>

<li>All paths use <tt>/</tt> as separator. <tt>/</tt> is not allowed inside file or directory names.</li>
<li>File attributes cannot be set, either when creating files or directories or afterwards.</li>
<li>Symbolic links can be read and traversed, but not created.</li>
<li>There is no support for hard links.</li>
<li>Files can be marked as executable if the FTP server indicates it is. That does not mean the file can be executed in the local JVM.</li>
<li><a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SeekableByteChannel.html">SeekableByteChannel</a> is supported because it&#x2019;s used by <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createFile-java.nio.file.Path-java.nio.file.attribute.FileAttribute...-">Files.createFile</a>. However, these channels do not support seeking specific positions or truncating.</li>
<li>There is no support for <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/UserPrincipalLookupService.html">UserPrincipalLookupService</a>.</li>
<li>There is no support for <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/WatchService.html">WatchService</a>.</li>
</ul></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2016&#x2013;2020.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
